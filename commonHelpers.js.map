{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function fetchArticles(query, currentPage) {\n  const API_KEY = '42557363-2349d8dc8525cd1cea516a01b';\n  const BASE_URL = 'https://pixabay.com/api/';\n  const url = `${BASE_URL}`;\n  const params = {\n    key: API_KEY,\n    q: query,\n    orientation: 'horizontal',\n    per_page: 15,\n    page: currentPage,\n    safesearch: true,\n  };\n  const res = await axios.get(url, { params });\n  return res.data;\n}","function articleTemplate(article) {\n  const { pageURL, previewURL, webformatURL, tags, likes, views, comments, downloads } = article;\n  return `\n\n  <li class=\"gallery-item\">\n  <a href=\"${article.webformatURL}\" class=\"image-link\">\n      <img class=\"gallery-image\" src=\"${article.webformatURL}\" alt=\"${article.tags}\">\n  </a>\n  <div class=\"comments\">\n      <div class=\"desc\">\n          <p class=\"label\">Likes</p>\n          <p class=\"value\">${article.likes}</p>\n      </div>\n      <div class=\"desc\">\n          <p class=\"label\">Views</p>\n          <p class=\"value\">${article.views}</p>\n      </div>\n      <div class=\"desc\">\n          <p class=\"label\">Comments</p>\n          <p class=\"value\">${article.comments}</p>\n      </div>\n      <div class=\"desc\">\n          <p class=\"label\">Downloads</p>\n          <p class=\"value\">${article.downloads}</p>\n      </div>\n  </div>\n</li>\n\n`;\n}\nexport function articlesTemplate(articles) {\n  return articles.map(articleTemplate).join('');\n}\n\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchArticles } from './js/pixabay-api.js';\nimport { articlesTemplate } from './js/render-functions.js';\n\n// SimpleLightbox params\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n  widthRatio: 0.9,\n  scaleImageToRatio: true,\n};\n\n\nconst refs = {\n  formElem: document.querySelector('.js-search-form'),\n  articleListElem: document.querySelector('.js-article-list'),\n  btnLoadMore: document.querySelector('.js-btn-load'),\n  loadElem: document.querySelector('.js-loader'),\n};\n\n\nlet query;\nlet page;\nlet maxPage;\nrefs.formElem.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.query.value.trim();\n  page = 1;\n  if (!query) {\n    showError('Empty field');\n    return;\n  }\n  showLoader();\n  try {\n    const data = await fetchArticles(query, page);\n    if (data.totalResults === 0) {\n      showError('Sorry!');\n    }\n    maxPage = Math.ceil(data.totalResults / 15);\n    refs.articleListElem.innerHTML = '';\n    renderArticles(data.hits);\n  } catch (err) {\n    showError(err);\n  }\n\n  hideLoader();\n  checkBtnVisibleStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoader();\n  const data = await fetchArticles(query, page);\n  renderArticles(data.hits);\n  hideLoader();\n  checkBtnVisibleStatus();\n  const height =\n    refs.articleListElem.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n    behavior: 'smooth',\n    top: 10,\n  });\n}\nfunction renderArticles(articles) {\n  const markup = articlesTemplate(articles);\n  refs.articleListElem.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', options);\n  lightbox.refresh();\n\n}\nfunction showLoadBtn() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  refs.btnLoadMore.classList.add('hidden');\n}\nfunction showLoader() {\n  refs.loadElem.classList.remove('hidden');\n}\nfunction hideLoader() {\n  refs.loadElem.classList.add('hidden');\n}\nfunction showError(msg) {\n  iziToast.error({\n    title: 'Error',\n    message: msg,\n  });\n}\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}\n"],"names":["fetchArticles","query","currentPage","API_KEY","url","params","axios","articleTemplate","article","articlesTemplate","articles","options","refs","page","maxPage","onFormSubmit","onLoadMoreClick","showError","showLoader","data","renderArticles","err","hideLoader","checkBtnVisibleStatus","markup","SimpleLightbox","showLoadBtn","hideLoadBtn","msg","iziToast"],"mappings":"owBACO,eAAeA,EAAcC,EAAOC,EAAa,CACtD,MAAMC,EAAU,qCAEVC,EAAM,2BACNC,EAAS,CACb,IAAKF,EACL,EAAGF,EACH,YAAa,aACb,SAAU,GACV,KAAMC,EACN,WAAY,EAChB,EAEE,OADY,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CCfA,SAASE,EAAgBC,EAAS,CAEhC,MAAO;AAAA;AAAA;AAAA,aAGIA,EAAQ,YAAY;AAAA,wCACOA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKrDA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,6BAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,6BAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,6BAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,CAM9C,CACO,SAASC,EAAiBC,EAAU,CACzC,OAAOA,EAAS,IAAIH,CAAe,EAAE,KAAK,EAAE,CAC9C,CCtBA,MAAMI,EAAU,CACd,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,IACX,WAAY,GACZ,kBAAmB,EACrB,EAGMC,EAAO,CACX,SAAU,SAAS,cAAc,iBAAiB,EAClD,gBAAiB,SAAS,cAAc,kBAAkB,EAC1D,YAAa,SAAS,cAAc,cAAc,EAClD,SAAU,SAAS,cAAc,YAAY,CAC/C,EAGA,IAAIX,EACAY,EACAC,EACJF,EAAK,SAAS,iBAAiB,SAAUG,CAAY,EACrDH,EAAK,YAAY,iBAAiB,QAASI,CAAe,EAE1D,eAAeD,EAAa,EAAG,CAI7B,GAHA,EAAE,eAAc,EAChBd,EAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCY,EAAO,EACH,CAACZ,EAAO,CACVgB,EAAU,aAAa,EACvB,MACD,CACDC,IACA,GAAI,CACF,MAAMC,EAAO,MAAMnB,EAAcC,EAAOY,CAAI,EACxCM,EAAK,eAAiB,GACxBF,EAAU,QAAQ,EAEpBH,EAAU,KAAK,KAAKK,EAAK,aAAe,EAAE,EAC1CP,EAAK,gBAAgB,UAAY,GACjCQ,EAAeD,EAAK,IAAI,CACzB,OAAQE,EAAK,CACZJ,EAAUI,CAAG,CACd,CAEDC,IACAC,IACA,EAAE,OAAO,OACX,CAEA,eAAeP,GAAkB,CAC/BH,GAAQ,EACRK,IACA,MAAMC,EAAO,MAAMnB,EAAcC,EAAOY,CAAI,EAC5CO,EAAeD,EAAK,IAAI,EACxBG,IACAC,IAEEX,EAAK,gBAAgB,kBAAkB,sBAAuB,EAAC,OACjE,SAAS,CACP,SAAU,SACV,IAAK,EACT,CAAG,CACH,CACA,SAASQ,EAAeV,EAAU,CAChC,MAAMc,EAASf,EAAiBC,CAAQ,EACxCE,EAAK,gBAAgB,mBAAmB,YAAaY,CAAM,EAE1C,IAAIC,EAAe,aAAcd,CAAO,EAChD,QAAO,CAElB,CACA,SAASe,GAAc,CACrBd,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CACA,SAASe,GAAc,CACrBf,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CACA,SAASM,GAAa,CACpBN,EAAK,SAAS,UAAU,OAAO,QAAQ,CACzC,CACA,SAASU,GAAa,CACpBV,EAAK,SAAS,UAAU,IAAI,QAAQ,CACtC,CACA,SAASK,EAAUW,EAAK,CACtBC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,CACA,SAASL,GAAwB,CAC3BV,GAAQC,EACVa,IAEAD,GAEJ"}